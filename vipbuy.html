<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Platba VIP | SmartySMP</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Press+Start+2P&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --vip-color: #bdc3c7;
            --paypal-blue: #0070ba;
            --success-green: #4caf50;
            --error-red: #ff5555;
        }

        body {
            background-color: #0f0f0f;
            color: white;
            font-family: 'Poppins', sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
        }

        .payment-box {
            background: #1a1a1a;
            padding: 40px;
            border-radius: 25px;
            text-align: center;
            border: 2px solid var(--vip-color);
            box-shadow: 0 0 30px rgba(189, 195, 199, 0.1);
            max-width: 450px;
            width: 90%;
        }

        h1 { font-family: 'Press+Start+2P', cursive; font-size: 1rem; color: var(--vip-color); margin-bottom: 20px; }

        .price-tag {
            font-size: 3rem;
            color: var(--success-green);
            font-weight: bold;
            margin-bottom: 20px;
        }

        /* Sekcia Kupónov */
        .coupon-container {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 25px;
            border: 1px dashed #444;
        }

        .coupon-input {
            background: #111;
            border: 1px solid #333;
            color: white;
            padding: 10px;
            border-radius: 8px;
            width: 60%;
            margin-right: 5px;
            outline: none;
        }

        .coupon-btn {
            background: var(--vip-color);
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }

        .coupon-btn:hover { transform: scale(1.05); }

        #couponMessage { font-size: 0.8rem; margin-top: 10px; display: block; }

        /* Tlačidlá */
        .pay-button {
            background: var(--paypal-blue);
            color: white;
            text-decoration: none;
            padding: 18px;
            border-radius: 12px;
            font-weight: bold;
            display: block;
            margin-bottom: 10px;
            transition: 0.3s;
        }

        .pay-button:hover { background: #005ea6; transform: translateY(-3px); }

        .free-button {
            background: #ffaa00;
            color: black;
            text-decoration: none;
            padding: 18px;
            border-radius: 12px;
            font-weight: bold;
            display: none; /* Predvolene skryté */
            cursor: pointer;
            border: none;
            width: 100%;
        }

        .back { color: #555; text-decoration: none; font-size: 0.8rem; display: block; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="payment-box">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg" width="120" style="margin-bottom: 20px;">
        <h1>VIP</h1>
        
        <div class="price-tag" id="displayPrice">1.50 €</div>

        <p style="font-size: 0.9rem; color: #aaa; margin-bottom: 20px;">
            Prijímateľ: <b>SmartySMP Team</b>
        </p>

        <div class="coupon-container" id="couponArea">
            <input type="text" id="couponInput" class="coupon-input" placeholder="Zadaj kód...">
            <button class="coupon-btn" onclick="applyCoupon()">POUŽIŤ</button>
            <span id="couponMessage"></span>
        </div>

        <a id="paypalLink" href="https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=dominikzacek69@gmail.com&item_name=Kamos+VIP+Rank+SmartySMP&amount=1.50&currency_code=EUR" class="pay-button">
            <i class="fab fa-paypal"></i> ZAPLATIŤ CEZ PAYPAL
        </a>

        <button id="freeRedeemBtn" class="free-button" onclick="redeemFree()">
            <i class="fas fa-gift"></i> AKTIVOVAŤ ZADARMO
        </button>

        <a href="store.html" class="back">← Späť do obchodu</a>
    </div>

    <script>
        // Nastavenia kódov
        const discountCodes = {
            "START20": 0.80, // 20% zľava
            "DOMINIK": 0.50  // 50% zľava
        };

        const freeCodes = ["ZADARMO69", "WEB-DARCEK"]; // Kódy na 100% zľavu

        let currentPrice = 1.50;

        function applyCoupon() {
            const input = document.getElementById('couponInput').value.trim().toUpperCase();
            const message = document.getElementById('couponMessage');
            const displayPrice = document.getElementById('displayPrice');
            const paypalLink = document.getElementById('paypalLink');
            const freeBtn = document.getElementById('freeRedeemBtn');
            const couponArea = document.getElementById('couponArea');

            // 1. Kontrola kódov ZADARMO
            if (freeCodes.includes(input)) {
                displayPrice.innerText = "ZADARMO";
                displayPrice.style.color = "#ffaa00";
                paypalLink.style.display = "none";
                freeBtn.style.display = "block";
                couponArea.style.background = "rgba(76, 175, 80, 0.1)";
                message.innerText = "Kód prijatý! Rank máš zadarmo.";
                message.style.color = "#4caf50";
                return;
            }

            // 2. Kontrola slevových kódov
            if (discountCodes[input]) {
                let multiplier = discountCodes[input];
                let newPrice = (currentPrice * multiplier).toFixed(2);
                
                displayPrice.innerText = newPrice + " €";
                message.innerText = "Sleva uplatnená!";
                message.style.color = "#4caf50";
                
                // Aktualizácia PayPal odkazu
                let baseLink = "https://www.paypal.com/cgi-bin/webscr?cmd=_xclick&business=dominikzacek69@gmail.com&item_name=Kamos+VIP+Rank+SmartySMP+(SLEVA)&currency_code=EUR";
                paypalLink.href = `${baseLink}&amount=${newPrice}`;
            } else {
                message.innerText = "Neplatný kód!";
                message.style.color = "#ff5555";
            }
        }

        function redeemFree() {
            let nick = prompt("Zadaj svoj Minecraft Nick pre aktiváciu:");
            if (nick) {
                alert("Požiadavka odoslaná! Dominik ti rank aktivuje čoskoro.");
                window.location.href = `mailto:dominikzacek69@gmail.com?subject=Aktivacia VIP ZADARMO&body=Ahoj, uplatnil som kod na Kamos VIP zadarmo. Moj nick je: ${nick}`;
            }
        }
    </script>
</body>
</html>
